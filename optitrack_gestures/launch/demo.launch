<!-- --> 
<launch>

  	<node name="soundplay_node" pkg="sound_play" type="soundplay_node.py"/>

	<node name="drone_feedback_signals_node" pkg="drone_feedback_signals" type="feedback_signals_node" output="screen">
		<remap from="demo_node_topic"  to="/demo"/>
		<remap from="output_sound"  to="/robotsound"/>		
		<param name="landed_sound" value="$(find drone_feedback_signals)/sounds/landed.wav"/>
		<param name="hovering_sound" value="$(find drone_feedback_signals)/sounds/hovering.wav"/>
		<param name="following_sound" value="$(find drone_feedback_signals)/sounds/following.wav"/>
	</node>

	
	<node name="gestures_node" pkg="optitrack_gestures" type="optitrack_gestures_demo" output="screen">
		<remap from="gesture_marker_pose_topic"  to="/optitrack/gesture_marker"/>
		<remap from="leader_pose_topic"  to="/leader_info_topic"/>
		<remap from="demo_info_topic"  to="/demo"/>
		<param name="leader_height" value="1.8"/>		
	</node>

	<node name="leader_selector" pkg="drone_following_leader" type="leader_selector_node" output="screen">
		<remap from="rigied_bodies_topic"  to="/optitrack/rigid_bodies"/>
		<remap from="leader_info_topic"  to="/leader_info_topic"/>
		<param name="leader_id" value="2"/>
	</node>

	<node name="drone_target_points" pkg="drone_following_leader" type="leader_desired_position_node" output="screen">
		<remap from="leader_info_topic"  to="/leader_info_topic"/>
		<remap from="desired_leader_position_topic"  to="/drone_target_points"/>
		<remap from="demo_node_topic"  to="/demo"/>
		<rosparam>initial_pose:  [-0.5, 0.6, 1.0, 0.0]</rosparam>
		<!--rosparam>initial_pose:  [-1.4, -0.5, 1.0, 0.0]</rosparam-->  <!-- [x,y,z,yaw (degrees)] -->
	</node>

	<node name="drone_control_node" pkg="drone_control_position" type="control_drone_position_node" output="screen">
		<remap from="drone_info_topic"  to="/optitrack/drone"/>
		<remap from="control_info"  to="/drone_target_points"/>
		<rosparam>Kd:  [0.25, 0.25]</rosparam>  <!-- [pitch, roll] -->
		<rosparam>Kp:  [0.25, 0.25,  0.5, 0.0125]</rosparam>  <!-- [pitch, roll, altitude, yaw] -->
		<rosparam>velocity_limit:  [0.2, 0.2, 1.0, 1.0]</rosparam>  <!-- [pitch, roll, altitude, yaw] -->
		<rosparam>delta_pose:  [-1.5, 0.0, 0.0, 0.0]</rosparam>  <!-- [x,y,z,yaw (degrees)] -->
		<rosparam>virtual_fence:  [2.45, -2.4, 2.5, -1.8, 2.25]</rosparam>  
		<!--rosparam>virtual_fence:  [1.2, -4.2, 1.9, -3.0, 2.25]</rosparam -->  
		<!--rosparam>virtual_fence:  [3.0, -2.45, 1.85, -2.4, 2.25]</rosparam-->  
		<!-- [maxX, minX, maxY, minY, maxAltitude] -->
	</node>

</launch>
